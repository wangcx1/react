<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=gb2312">
    <title>JavaScript获取客户端IP</title>
</head>
<body>

<script>
    //1、查找元素的位置
    //    如果数组中存在 item，则返回元素在数组中的位置，否则返回 -1
    function indexOf(arr, item) {
        if (arr.indexOf(item) > -1) {
            return arr.indexOf(item)
        } else {
            return -1;
        }

    }

    console.log(indexOf([1, 2, 3, 4], 3));

    //    2、计算给定数组 arr 中所有元素的总和
    function sum(arr) {
        var sum = 0;
        arr.forEach(function (v) {
            sum += v;
        })
        return sum;

    }

    console.log(sum([1, 2, 3, 4]))

    //    3、移除数组 arr 中的所有值与 item 相等的元素。不要直接修改数组 arr，结果返回新的数组
    function remove(arr, item) {
        return arr.filter(function (v) {
            return v !== item;
        })
    }

    console.log(remove([1, 2, 3, 4, 2], 2))

    //    4、移除数组 arr 中的所有值与 item 相等的元素，直接在给定的 arr 数组上进行操作，并将结果返回
    function removeWithoutCopy(arr, item) {
        for (var i = 0; i < arr.length; i++) {
            if (arr.indexOf(item) > -1) {
                arr.splice(arr.indexOf(item), 1);
            }
        }
        return arr;
    }

    console.log(removeWithoutCopy([1, 2, 3, 3, 4, 2], 2))

    //    5、在数组 arr 末尾添加元素 item。不要直接修改数组 arr，结果返回新的数组
    function append(arr, item) {
        return arr.concat(item)
    }

    console.log(append([1, 2, 3, 4], 10))

    //    6、删除数组 arr 最后一个元素。不要直接修改数组 arr，结果返回新的数组
    function truncate(arr) {
        return arr.slice(0, -1)
    }

    console.log(truncate([1, 2, 3, 4]))

    //    7、在数组 arr 开头添加元素 item。不要直接修改数组 arr，结果返回新的数组
    function prepend(arr, item) {
        var t = [];
        t.push(item);
        return t.concat(arr)
    }

    console.log(prepend([1, 2, 3, 4], 10))

    //    8、删除数组 arr 第一个元素。不要直接修改数组 arr，结果返回新的数组
    function curtail(arr) {

        return arr.slice(1, arr.length);
    }

    console.log(curtail([1, 2, 3, 4]))

    //    9、在数组 arr 的 index 处添加元素 item。不要直接修改数组 arr，结果返回新的数组
    function insert(arr, item, index) {
        var a = [].concat(arr);
        a.splice(index, 0, item);
        return a;
    }

    console.log(insert([1, 2, 3, 4], 'z', 2))

    //    10、统计数组 arr 中值等于 item 的元素出现的次数
    function count(arr, item) {
        var count = 0;
        arr.forEach(function (v) {
            if (v === item) {
                count++;
            }
        })
        return count;
    }

    console.log(count([1, 2, 4, 4, 3, 4, 3], 4))

    //    11、找出数组 arr 中重复出现过的元素
    function duplicates(arr) {
        var a = []
        for (var i = 0; i < arr.length - 1; i++) {
            for (var j = i + 1; j < arr.length; j++) {
                if (arr[i] == arr[j] && a.indexOf(arr[i]) == -1) {
                    a.push(arr[i]);
                }
            }
        }
        return a;
    }

    console.log(duplicates([1, 2, 4, 4, 3, 3, 1, 5, 3]))

    //    12、为数组 arr 中的每个元素求二次方。不要直接修改数组 arr，结果返回新的数组
    function square(arr) {
        var a = [];
        arr.forEach(function (v) {
            a.push(v * v);
        })
        return a;
    }

    console.log(square([1, 2, 3, 4]))

    //    13、在数组 arr 中，查找值与 item 相等的元素出现的所有位置
    function findAllOccurrences(arr, target) {
        arr = arr.split('');
        console.log(arr)
        var a = [];
        arr.forEach(function (v, i) {
            if (v === target) {
                a.push(i)
            }
        })
        return a;
    }

    console.log(findAllOccurrences('abcdefgtabc', 'a'))

    function globals() {
        var myObject = {
            name: 'Jory'
        };

        return myObject;
    }

    console.log(globals())

    function count(start, end) {
        console.log(start++);
        var timer = setInterval(function () {
            if (start <= end) {
                console.log(start++)
            } else {
                clearInterval(timer)
            }
        }, 100);
        return {
            cancel: function () {
                clearInterval(timer)
            }
        }
    }

    console.log(count(1, 10));

    function fizzBuzz(num) {
        if (num % 3 === 0 && num % 5 === 0) {
            return "fizzbuzz";
        } else if (num % 3 === 0) {
            return "fizz";
        } else if (num % 5 === 0) {
            return "buzz";
        } else if (typeof (num) !== "number" || num === null) {
            return false;
        } else {
            return num;
        }
    }

    console.log(fizzBuzz(15))

    function argsAsArray(fn, arr) {
        return fn.apply(this, arr)
    }

    console.log(argsAsArray(function (greeting, name, punctuation) {
        return greeting + ', ' + name + (punctuation || '!');
    }, ['Hello', 'Ellie', '!']))

    function functionFunction(str) {
        return f = function (str1) {
            return str + "," + str1;


        }
    }

    console.log(functionFunction("Hello")("world"))

    function makeClosures(arr, fn) {
        var result = [];
        arr.forEach(function (i) {
            result.push(function () {
                return fn(i)
            });
        });
        return result;
    }

    console.log(makeClosures([1, 2, 3], function (x) {
        return x * x;
    }))

    var sayIt = function (greeting, name, punctuation) {
        return greeting + ', ' + name + (punctuation || '!');
    };

    function partial(fn, str1, str2) {
        function result(str3) {
            fn(str1, str2, str3)
        }

        return result;
    }

    console.log(partial(sayIt, 'Hello', 'Ellie')('!!!'))

    function useArguments() {
        console.log(arguments)
        var sum = 0;
        for (var i = 0; i < arguments.length; i++) {
            sum += arguments[i];
        }
        return sum;
    }

    console.log(useArguments(1, 2, 3, 4));
    //    14、实现函数 partialUsingArguments，调用之后满足如下条件：
    //    1、返回一个函数 result
    //    2、调用 result 之后，返回的结果与调用函数 fn 的结果一致
    //    3、fn 的调用参数为 partialUsingArguments 的第一个参数之后的全部参数以及 result 的调用参数
    function partialUsingArguments(fn) {
        var args = Array.prototype.slice.call(arguments, 1);
        var result = function () {
            return fn.apply(this, args.concat(Array.prototype.slice.call(arguments)))
        }
        return result;
    }

    console.log(partialUsingArguments())
    //15、已知 fn 为一个预定义函数，实现函数 curryIt，调用之后满足     如下条件：
    //1、返回一个函数 a，a 的 length 属性值为 1（即显式声明 a          接收一个参数）
    //2、调用 a 之后，返回一个函数 b, b 的 length 属性值为 1
    //3、调用 b 之后，返回一个函数 c, c 的 length 属性值为 1
    //4、调用 c 之后，返回的结果与调用 fn 的返回值一致
    //5、fn 的参数依次为函数 a, b, c 的调用参数
    function curryIt(fn) {
        var length = fn.length;
        var args = [];
        var result = function (arg) {
            args.push(arg);
            length--;
            if (length <= 0) {
                return fn.apply(this, args);
            } else {
                return result;
            }
        }
        return result;
    }

    var fn = function (a, b, c) {
        return a + b + c
    };
    console.log(curryIt(fn)(1)(2)(3))

    function createModule(str1, str2) {
        return {
            greeting: str1,
            name: str2,
            saylt: function () {
                return this.greeting + "," + this.name;
            }
        }
    }

    console.log(createModule('Hello', 'world'))
    function valueAtBit(num, bit) {
        var t=num.toString(2).split("").reverse();
        return t[bit-1];
    }
    console.log(valueAtBit(128,8))
    function convertToBinary(num) {
        while(num.toString(2).length<8){
            return "0"+num.toString(2)
        }
    }
    console.log(convertToBinary(65))
    function multiply(a, b) {
       var stra=a.toString().split('.')[1]||'';
       var strb=b.toString().split('.')[1]||'';
        var len=stra.length+strb.length;
       return parseFloat(a*b).toFixed(len);
    }
    console.log(multiply(0.3,0.0001))
    function iterate(obj) {
      var arr=[];
      for(key in obj){
          if(obj.hasOwnProperty(key)){
              arr.push(key+":"+obj[key]);
          }
      }
      return arr;
    }
    var C = function() {this.foo = 'bar'; this.baz = 'bim';};
    C.prototype.bop = 'bip';
    console.log(iterate(new C()));
    function containsNumber(str) {
       var b=/\d/;
       return b.test(str);
    }
    console.log(containsNumber('abc123'))
    function containsRepeatingLetter(str) {
        return /([a-zA-Z])\1/.test(str)
    }
    console.log(containsRepeatingLetter('rattler'))
    function endsWithVowel(str) {
//        var arr=['a','e','i','o','u','A','E','I','O','U'];
//        var stra=str.split('');
//        var ta=stra[stra.length-1];
//        if(arr.indexOf(ta)>-1){
//            return true;
//        }else{
//            return false;
//        }
        return /[a,e,i,o,u]$/i.test(str)
    }
    console.log(endsWithVowel('gorilla'))
    function captureThreeNumbers(str) {
        var reg=/\d{3}/;
        if(reg.test(str)){
            return str.match(reg)[0];
        }else {
            return false;
        }

    }
    console.log(captureThreeNumbers('9876543'))
</script>
</body>
</html>